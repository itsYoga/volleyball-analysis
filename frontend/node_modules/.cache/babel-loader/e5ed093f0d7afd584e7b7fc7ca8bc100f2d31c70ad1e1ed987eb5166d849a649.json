{"ast":null,"code":"var _jsxFileName = \"/Users/jesse/Documents/\\u5C08\\u984C/volleyball_analysis_webapp/frontend/src/components/VideoPlayer.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getVideoUrl, getAnalysisResults } from '../services/api';\nimport { EventTimeline } from './EventTimeline';\nimport { PlayerHeatmap } from './PlayerHeatmap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const VideoPlayer = ({\n  videoId\n}) => {\n  _s();\n  const params = useParams();\n  const effectiveId = videoId && videoId.length > 0 ? videoId : params.videoId;\n  const [result, setResult] = useState(null);\n  const videoRef = useRef(null);\n  useEffect(() => {\n    if (!effectiveId) return;\n    getAnalysisResults(effectiveId).then(setResult);\n  }, [effectiveId]);\n  const handleSeek = sec => {\n    if (videoRef.current) videoRef.current.currentTime = sec;\n  };\n  if (!result) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u8B80\\u53D6\\u5206\\u6790\\u4E2D...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 23\n  }, this);\n  const {\n    action_recognition,\n    scores,\n    players_tracking,\n    game_states,\n    video_info\n  } = result;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full max-w-3xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      src: getVideoUrl(effectiveId),\n      controls: true,\n      width: (video_info === null || video_info === void 0 ? void 0 : video_info.width) || 640,\n      height: (video_info === null || video_info === void 0 ? void 0 : video_info.height) || 360,\n      className: \"rounded shadow\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EventTimeline, {\n      actions: (action_recognition === null || action_recognition === void 0 ? void 0 : action_recognition.actions) || [],\n      scores: scores || [],\n      gameStates: game_states || [],\n      duration: (video_info === null || video_info === void 0 ? void 0 : video_info.total_frames) || 1000,\n      onSeek: handleSeek\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute left-0 top-0 pointer-events-none\",\n      children: /*#__PURE__*/_jsxDEV(PlayerHeatmap, {\n        playerTracks: players_tracking || [],\n        videoSize: {\n          width: video_info === null || video_info === void 0 ? void 0 : video_info.width,\n          height: video_info === null || video_info === void 0 ? void 0 : video_info.height\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoPlayer, \"BwCxaLiAWL/B/kXfxZp0kl8i0mI=\", false, function () {\n  return [useParams];\n});\n_c = VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useParams","getVideoUrl","getAnalysisResults","EventTimeline","PlayerHeatmap","jsxDEV","_jsxDEV","VideoPlayer","videoId","_s","params","effectiveId","length","result","setResult","videoRef","then","handleSeek","sec","current","currentTime","children","fileName","_jsxFileName","lineNumber","columnNumber","action_recognition","scores","players_tracking","game_states","video_info","className","ref","src","controls","width","height","actions","gameStates","duration","total_frames","onSeek","playerTracks","videoSize","_c","$RefreshReg$"],"sources":["/Users/jesse/Documents/專題/volleyball_analysis_webapp/frontend/src/components/VideoPlayer.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getVideoUrl, getAnalysisResults } from '../services/api';\nimport { EventTimeline } from './EventTimeline';\nimport { PlayerHeatmap } from './PlayerHeatmap';\n\nexport const VideoPlayer: React.FC<{ videoId?: string }> = ({ videoId }) => {\n  const params = useParams();\n  const effectiveId = videoId && videoId.length > 0 ? videoId : (params.videoId as string);\n  const [result, setResult] = useState<any>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n\n  useEffect(() => {\n    if (!effectiveId) return;\n    getAnalysisResults(effectiveId).then(setResult);\n  }, [effectiveId]);\n\n  const handleSeek = (sec: number) => {\n    if (videoRef.current) videoRef.current.currentTime = sec;\n  };\n\n  if (!result) return <div>讀取分析中...</div>;\n\n  const { action_recognition, scores, players_tracking, game_states, video_info } = result;\n\n  return (\n    <div className=\"relative w-full max-w-3xl mx-auto\">\n      <video ref={videoRef} src={getVideoUrl(effectiveId)} controls width={video_info?.width || 640} height={video_info?.height || 360} className=\"rounded shadow\" />\n      <EventTimeline\n        actions={action_recognition?.actions || []}\n        scores={scores || []}\n        gameStates={game_states || []}\n        duration={video_info?.total_frames || 1000}\n        onSeek={handleSeek}\n      />\n      <div className=\"absolute left-0 top-0 pointer-events-none\">\n        <PlayerHeatmap playerTracks={players_tracking || []} videoSize={{ width: video_info?.width, height: video_info?.height }} />\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}